(function(){var c,b,f,e,d;var a=function(g,h){return function(){return g.apply(h,arguments)}};d=Backbone.Model.extend({});e=Backbone.Model.extend({});c={Models:{blogsModel:e,sectionModel:d},Views:{blogView:Backbone.View.extend({events:{"click .articlePagination a":"pagBehavior"},tagName:"div",className:"box",pagBehavior:function(i){var g,h;i.preventDefault();g=i.currentTarget;h=$(g).attr("href");h=h.replace("#","");$(g).closest(".box").find("article").hide();$(g).closest(".box").find("article").filter(":eq("+h+")").show();$(g).closest(".articlePagination").find("a").removeClass("active");return $(g).addClass("active")},rssRender:function(){var k,l,j,g,i,h;h='				{{#rssData}}					<article>						<header>							<h1>								<a href="{{link}}" target="_blank">									{{title}}								</a>							</h1>						</header>						<div class="thumb">							<img src="{{model.logo}}" alt="{{model.title}}">						</div>						<p>							{{contentSnippet}}							<a href="{{link}}" target="_blank" class="readmore">								Leer m√°s							</a>						</p>						<span class="author">							Author: <strong>{{author}}</strong>						</span>					</article>				{{/rssData}}								';i='				<div class="articlePagination">					<% _.each(data,function(item,i){ %>						<a href="#<%= i %>"><%= i + 1 %></a>					<% }); %>				</div>				';k={model:this.model.toJSON(),rssData:this.rssData};j=Mustache.compile(h);l=j(k);k={data:this.rssData};g=_.template(i,k);return l=""+l+" "+g},render:function(){var h,g;g=Mustache.compile(this.template);h=g(this.model.toJSON());this.$el.append(h);return this.loadRss()},loadRss:function(){var g;g={feeds:{feed:this.model.get("urlFeed")},max:10,loadingTemplate:c.loading,onComplete:a(function(h){this.rssData=h;$(this.$el).html(this.rssRender());$(this.$el).find("article").hide();$(this.$el).find("article").filter(":eq(0)").show();return $(this.$el).find(".articlePagination").find("a:eq(0)").addClass("active")},this)};return $(this.$el).feeds(g)},template:'				<article>					<header>						<h1>							<a href="{{urlFeed}}">								{{title}}							</a>						</h1>					</header>					<div class="thumb">					<img src="{{logo}}" alt="{{title}}">					</div>					<p>						{{slogan}}						<a href="{{urlFeed}}" class="readmore">							Rss						</a>					</p>					<span class="author">						Author: <strong>{{author}}</strong>					</span>				</article>			'}),blogViewCollections:Backbone.View.extend({tagName:"p",initialize:function(){this.collection.on("add",this.addOne,this);return this.collection.on("reset",this.addAll,this)},addAll:function(){return this.collection.forEach(this.addOne,this)},addOne:function(g){var h;h=new c.Views.blogView({model:g});h.render();return this.$el.append(h.el)}}),sectionView:Backbone.View.extend({tagName:"section",render:function(){var g;g=this.model.get("id");this.blogCollection_=new c.Collections.blogCollection;this.blogViewCollections_=new c.Views.blogViewCollections({collection:this.blogCollection_});this.blogCollection_.fetch({data:{section:g}});this.blogViewCollections_.render();this.$el.attr("id",this.model.get("id"));return this.$el.html(this.blogViewCollections_.el)}}),sectionCollectionView:Backbone.View.extend({addAll:function(){return this.collection.forEach(this.addOne,this)},addOne:function(h){var g;g=new c.Views.sectionView({model:h});g.render();return this.$el.append(g.el)},showSection:function(g){this.$el.find("section").hide();return this.$el.find("section#"+g).show()},initialize:function(){this.$el.html("");this.collection.on("add",this.addOne,this);return this.collection.on("reset",this.addAll,this)}})},Collections:{blogCollection:Backbone.Collection.extend({model:e,url:"feeds.php",parse:function(g){this.response=g;return this.response}}),sectionCollection:Backbone.Collection.extend({url:"feeds.php",model:d,parse:function(h){var g;this.response=h;g=[];_.each(this.response,function(j,i){var k;k={id:i};return g.push(k)});return g}})},loading:'<img src="/img/loading.gif" alt="loading..." />'};b=Backbone.View.extend({Routers:new (Backbone.Router.extend({initialize:function(){this.sectionCollection=new c.Collections.sectionCollection;this.sectionCollectionView=new c.Views.sectionCollectionView({el:$("#container"),collection:this.sectionCollection});this.defaultSection="blogs";return this.sectionCollection.fetch({success:a(function(){var g;g=window.location.hash;if(g===""){g=this.defaultSection}else{g=g.replace("#","")}return this.sectionCollectionView.showSection(g)},this)})},routes:{"(:idStr)":"index"},index:function(g){if(g==null){g="blogs"}return this.sectionCollectionView.showSection(g)}})),events:{"click #navigation a":function(g){g.preventDefault();return Backbone.history.navigate(g.target.hash,{trigger:true})},"click footer a":function(h){var g;h.preventDefault();g=h.currentTarget.href;return window.open(g,"_blank")}},start:function(){return Backbone.history.start({pushState:false})}});f=new b({el:document.body});$(document).ready(function(){return f.start()})}).call(this);