(function(){var b;var a=function(c,d){return function(){return c.apply(d,arguments)}};b={init:function(){this.loadSections();$(document).on("click","a",function(c){return c.preventDefault()});$("footer").find("a").bind("click",function(d){var c;c=$(this).attr("href");return window.open(c,"_blank")});this.navElements=$("#navigation").find("ul").find("li").find("a").not("a:eq(0)");$("#navigation").find("ul").find("li:eq(0)").addClass("active");return this.navElements.bind("click",this.navBehavior)},mainContainer:"#container",loaded:[],navBehavior:function(f){var c,d;c=$(this);c.closest("ul").find("li").removeClass("active");c.closest("li").addClass("active");d=c.attr("href").replace("#","");c.unbind();return b.loadSection(d,c)},richistoken:function(){return Math.random().toString(36).substr(2)},loadSections:function(){return $.ajax({url:"feeds.php",dataType:"JSON",type:"POST",data:{token:this.richistoken()}}).done(a(function(c){return this.initSections(c)},this))},initSections:function(c){var d,e;this.response=c!=null?c:false;d=$("#navigation").find("ul").find("li").find("a:eq(0)");e=d.attr("href").replace("#","");return this.loadSection(e,d.selector,true)},loadSection:function(d,c,f){var e;this.sectionStrID=d;if(f==null){f=false}e=c;return $.each(this.response,a(function(h,j){var k,i,l,g;if(this.sectionStrID===h){i=this.sectionTpl(j,this.sectionStrID);if(f===true){$(this.mainContainer).html(i);$(""+e).bind("click",this.toggleSection)}else{$(this.mainContainer).append(i);l=$(c).attr("href");k=$(this.mainContainer).find("section");k.hide();k.filter(l).show();$(c).bind("click",this.toggleSection)}g=$("#"+this.sectionStrID).find("div.box");return g.bind("click",this.loadRssInit)}},this))},loadRssInit:a(function(f){var d,g,c;$(f.currentTarget).unbind("click",this.loadRssInit);d=$(f.currentTarget);c=d.find("a.readmore").attr("href");g={feeds:{feed1:c},max:10,onComplete:function(e){return b.parseEntries(e,d)},loadingTemplate:b.loadingTemplate};return d.feeds(g)},this),loadingTemplate:'<img src="/img/loading.gif" alt="loading..." />',parseEntries:function(e,c){var d,f,g;f=$(c).data("logo");$(c).html(this.entrieTemplate(e,f));d=$(c).find("article");d.css("opacity",1);d.not(":eq(0)").hide();d.on("click","a",function(i){var h;h=$(this).attr("href");return window.open(h,"_blank")});g=$(c).find(".articlePagination").find("a");g.filter(":eq(0)").addClass("active");return g.bind("click",a(function(h){return this.changeEntrie(h)},this))},changeEntrie:function(g){var f,d,c;d=$(g.currentTarget).attr("href");d=d.replace("#","");f=$(g.currentTarget).closest(".box");f.find("article").hide();f.find("article").filter(":eq("+d+")").show();c=$(g.currentTarget).closest("div");c.find("a.active").removeClass("active");return $(g.currentTarget).addClass("active")},toggleSection:function(){var c,f,d,e;d=$(this).closest("ul").find("li");d.removeClass("active");$(this).closest("li").addClass("active");f=$(this).attr("href");c=$(f).closest("div");e=c.find("section");e.hide();return e.filter(f).show()},sectionTpl:function(e,c){var d;e.id=c;d='			<section id="<%= data.id %>">				<% _.each(data, function(rss) { %>					<div class="box" data-logo="<%= rss.logo %>">						<article>							<header>                            								<h1>									<a href="<%= rss.url %>">										<%= rss.title %>									</a>								</h1>							</header>                        							<div class="thumb">								<img src="<%= rss.logo %>" alt="logo"/>							</div>							<p>								<%= rss.slogan %>								<a href="<%= rss.urlFeed %>" class="readmore">Rss</a>							</p>                        							<span class="author"> 								Author: <strong> <%= rss.author %> </strong> 							</span>						</article>					</div>					<% }); %>			</section>		';return _.template(d,{data:e})},entrieTemplate:function(d,e){var f,c;if(e==null){e="/img/cats/120x120.jpg"}c='			<% _.each(data, function(rss) { %>				<article>					<header>                            						<h1>							<a href="<%= rss.link %>">								<%= rss.title %>							</a>						</h1>					</header>                        					<div class="thumb">						<img src="<%= logo %>" alt="logo"/>					</div>					<p>						<%= rss.contentSnippet %>						<a href="<%= rss.link %>" class="readmore">Leer m√°s</a>					</p>                        					<span class="author"> 						Author: <strong> <%= rss.author %> </strong>					</span>				</article>			<% }); %>			<div class="articlePagination">				<% _.each(data,function(item,i){ %>					<a href="#<%= i %>"><%= i + 1 %></a>				<% }); %>			</div>		';f={data:d,logo:e};return _.template(c,f)}};$(document).ready(function(){return b.init()})}).call(this);